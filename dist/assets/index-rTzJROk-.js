import"https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js";import*as U from"https://cdn.jsdelivr.net/npm/date-fns@2.24.0/esm/index.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const m of c.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function a(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(n){if(n.ep)return;n.ep=!0;const c=a(n);fetch(n.href,c)}})();let X=e=>{const t=document.getElementById("main"),a=document.createElement("div");a.className="normalDiv";const o=document.createElement("h1");o.className=`cityName${e} cityName`,t.appendChild(o);const n=document.createElement("p");n.className=`descR${e} descR`,t.appendChild(n);const c=document.createElement("img");c.className=`imgSky${e} imgSky`,t.appendChild(c);const m=document.createElement("h2");m.className=`temperature${e} temperature`,t.appendChild(m);const s=document.createElement("div");s.className="bigDiv",t.appendChild(s);const l=document.createElement("div");l.id="today",s.appendChild(a),a.appendChild(l);const d=document.createElement("h2");d.id="todays",d.textContent="TODAY'S FORECAST",l.appendChild(d);const u=document.createElement("div");u.className="forecastDay",l.appendChild(u);const r=document.createElement("div");r.id="matin",u.appendChild(r);const p=document.createElement("div");p.id="midi",u.appendChild(p);const h=document.createElement("div");h.id="soir",u.appendChild(h);const q=document.createElement("h3");q.className="hour hour_mat",q.textContent="03:00",r.appendChild(q);const $=document.createElement("h3");$.className="hour hour_mid",$.textContent="12:00",p.appendChild($);const E=document.createElement("h3");E.className="hour hour_soi",E.textContent="21:00",h.appendChild(E);const S=document.createElement("img");S.className=`imgToday img_mat img_mat${e}`,r.appendChild(S);const f=document.createElement("img");f.className=`imgToday img_mid img_mid${e}`,p.appendChild(f);const w=document.createElement("img");w.className=`imgToday img_soi img_soi${e}`,h.appendChild(w);const b=document.createElement("h3");b.className=`tempToday temp_mat temp_mat${e}`,r.appendChild(b);const M=document.createElement("h3");M.className=`tempToday temp_mid temp_mid${e}`,p.appendChild(M);const T=document.createElement("h3");T.className=`tempToday temp_soi temp_soi${e}`,h.appendChild(T);const C=document.createElement("div");C.id="week",s.appendChild(C);const v=document.createElement("h2");v.id="weeks",v.textContent="5-DAY FORECAST",C.appendChild(v);const i=document.createElement("div");i.className="forecastWeek",C.appendChild(i);const y=document.createElement("div"),D=document.createElement("h3"),W=document.createElement("p"),I=document.createElement("img");y.id="un",D.className=`day day_un day_un${e}`,W.className=`tempW temp_un temp_un${e}`,I.className=`imgW img_un img_un${e}`,i.appendChild(y),y.appendChild(D),y.appendChild(W),y.appendChild(I);const g=document.createElement("div"),k=document.createElement("h3"),L=document.createElement("p"),O=document.createElement("img");g.id="deux",k.className=`day day_deux day_deux${e}`,L.className=`tempW temp_deux temp_deux${e}`,O.className=`imgW img_deux img_deux${e}`,i.appendChild(g),g.appendChild(k),g.appendChild(L),g.appendChild(O);const _=document.createElement("div"),B=document.createElement("h3"),Y=document.createElement("p"),A=document.createElement("img");_.id="trois",B.className=`day day_trois day_trois${e}`,Y.className=`tempW temp_trois temp_trois${e}`,A.className=`imgW img_trois img_trois${e}`,i.appendChild(_),_.appendChild(B),_.appendChild(Y),_.appendChild(A);const N=document.createElement("div"),F=document.createElement("h3"),J=document.createElement("p"),P=document.createElement("img");N.id="quatre",F.className=`day day_quatre day_quatre${e}`,J.className=`tempW temp_quatre temp_quatre${e}`,P.className=`imgW img_quatre img_quatre${e}`,i.appendChild(N),N.appendChild(F),N.appendChild(J),N.appendChild(P);const x=document.createElement("div"),G=document.createElement("h3"),z=document.createElement("p"),V=document.createElement("img");x.id="cinq",G.className=`day day_cinq day_cinq${e}`,z.className=`tempW temp_cinq temp_cinq${e}`,V.className=`imgW img_cinq img_cinq${e}`,i.appendChild(x),x.appendChild(G),x.appendChild(z),x.appendChild(V);const j=document.createElement("div"),Z=document.createElement("img"),Q=document.createElement("h2");j.className=`divImgW divImgW${e}`,Z.className=`cityImg cityImg${e}`,Q.className=`titleCity titleCity${e}`,a.appendChild(j),j.appendChild(Q),j.appendChild(Z);const R=document.createElement("div"),K=document.createElement("canvas");R.className=`divChart divChart${e}`,K.className=`canvas canvas${e}`,t.appendChild(R),R.appendChild(K)},ee=(e,t)=>{const a=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],o=new Date,n=U.getDay(o),c=n,m=document.querySelector(`.canvas${t}`);new Chart(m,{type:"bar",data:{labels:[a[n-1],a[n],a[(c+1)%7],a[(c+2)%7],a[(c+3)%7],a[(c+4)%7]],datasets:[{label:"Temperature",data:[Math.round(e.list[0].main.temp-273.15),Math.round(e.list[8].main.temp-273.15),Math.round(e.list[16].main.temp-273.15),Math.round(e.list[24].main.temp-273.15),Math.round(e.list[32].main.temp-273.15),Math.round(e.list[39].main.temp-273.15)],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},options:{scales:{y:{beginAtZero:!0}}}})},ae=(e,t,a)=>{const o=document.querySelector(`.day_un${a}`),n=document.querySelector(`.day_deux${a}`),c=document.querySelector(`.day_trois${a}`),m=document.querySelector(`.day_quatre${a}`),s=document.querySelector(`.day_cinq${a}`);o.textContent=e[t+1],n.textContent=e[t+2],c.textContent=e[t+3],m.textContent=e[t+4],s.textContent=e[t+5]},te=e=>{const t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=new Date;console.log(a);const n=U.getDay(a);console.log(n);const c=t[n];console.log(c),ae(t,n,e)},ne=(e,t,a)=>{const o=document.querySelector(`.cityName${t}`),n=document.querySelector(`.temperature${t}`),c=document.querySelector(`.imgSky${t}`),m=document.querySelector(`.descR${t}`),s=document.querySelector(`.img_mat${t}`),l=document.querySelector(`.img_mid${t}`),d=document.querySelector(`.img_soi${t}`),u=document.querySelector(`.temp_mat${t}`),r=document.querySelector(`.temp_mid${t}`),p=document.querySelector(`.temp_soi${t}`),h=document.querySelector(`.temp_un${t}`),q=document.querySelector(`.temp_deux${t}`),$=document.querySelector(`.temp_trois${t}`),E=document.querySelector(`.temp_quatre${t}`),S=document.querySelector(`.temp_cinq${t}`),f=document.querySelector(`.img_un${t}`),w=document.querySelector(`.img_deux${t}`),b=document.querySelector(`.img_trois${t}`),M=document.querySelector(`.img_quatre${t}`),T=document.querySelector(`.img_cinq${t}`),C=document.querySelector(`.cityImg${t}`),v=document.querySelector(`.titleCity${t}`);let i=e.list[0].main.temp-273.15,y=Math.round(i),D=e.list[0].weather[0].main,W=e.list[0].weather[0].description,I=`../../assets/img/${e.list[0].weather[0].main}.png`,g=`./assets/img/${e.list[1].weather[0].main}.png`,k=`./assets/img/${e.list[2].weather[0].main}.png`,L=e.list[0].main.temp-273.15,O=e.list[1].main.temp-273.15,_=e.list[2].main.temp-273.15;o.textContent=t,n.textContent=y+"°C",m.textContent=W,c.src=`./assets/img/${D}.png`,s.src=I,l.src=g,d.src=k,u.textContent=Math.round(L)+"°C",r.textContent=Math.round(O)+"°C",p.textContent=Math.round(_)+"°C",h.textContent=Math.round(e.list[8].main.temp-273.15)+"°C",q.textContent=Math.round(e.list[16].main.temp-273.15)+"°C",$.textContent=Math.round(e.list[24].main.temp-273.15)+"°C",E.textContent=Math.round(e.list[32].main.temp-273.15)+"°C",S.textContent=Math.round(e.list[39].main.temp-273.15)+"°C",f.src=`./assets/img/${e.list[8].weather[0].main}.png`,w.src=`./assets/img/${e.list[16].weather[0].main}.png`,b.src=`./assets/img/${e.list[24].weather[0].main}.png`,M.src=`./assets/img/${e.list[32].weather[0].main}.png`,T.src=`./assets/img/${e.list[39].weather[0].main}.png`,C.src=a.results[0].urls.regular,v.textContent=t};async function H(){const e=document.getElementById("choose"),t=localStorage.getItem("ville"),a=document.querySelector("main"),o=e.value||t||"charleroi";if(a.innerHTML="",o!="")try{let c=await(await fetch("https://us1.locationiq.com/v1/search?key=pk.d12d07f0d36545fc2051ed5f2e34c1cd&q="+o+"%20&format=json")).json();const m=c[0].lat,s=c[0].lon;let d=await(await fetch("https://api.openweathermap.org/data/2.5/forecast?lat="+m+"&lon="+s+"&appid=eb9158767d821cfee8d7eca824f38e1f")).json(),r=await(await fetch("https://api.unsplash.com/search/photos?client_id=p1qn3My8katmILWqNG9L5_s5a25uQT3IGfJJexTgxfw&query="+o)).json();X(o),ne(d,o,r),te(o),ee(d,o)}catch(n){console.log(n)}localStorage.setItem("ville",o),e.value=""}async function ce(){const e=document.getElementById("choose");localStorage.getItem("ville");const t=e.value;if(t!="")try{let o=await(await fetch("https://api.myptv.com/geocoding/v1/locations/by-text?searchText="+t+"&apiKey=RVVfNzQ1ZTAyOGRiMDk2NDJhODg3ZWY3NTc1NThiMWIyZTk6MmNiYmEwMzYtNTczYy00Mzc3LThiMmYtMTFjODljNDcxY2Ji")).json();const n=o.locations[0].referencePosition.latitude,c=o.locations[0].referencePosition.longitude;let s=await(await fetch("https://api.openweathermap.org/data/2.5/forecast?lat="+n+"&lon="+c+"&appid=eb9158767d821cfee8d7eca824f38e1f")).json(),d=await(await fetch("https://api.unsplash.com/search/photos?client_id=p1qn3My8katmILWqNG9L5_s5a25uQT3IGfJJexTgxfw&query="+t)).json();X(t),ne(s,t,d),te(t),ee(s,t)}catch(a){console.log(a)}e.value=""}function oe(){const e=document.getElementById("submit"),t=document.querySelector("#choose"),a=document.getElementById("add");H(),e.addEventListener("click",o=>{o.preventDefault(),t.value!=""&&H()}),a.addEventListener("click",o=>{o.preventDefault(),t.value!=""&&ce()})}oe();
